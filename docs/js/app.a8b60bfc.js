(function(t){function o(o){for(var n,c,s=o[0],a=o[1],u=o[2],l=0,p=[];l<s.length;l++)c=s[l],Object.prototype.hasOwnProperty.call(i,c)&&i[c]&&p.push(i[c][0]),i[c]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n]);h&&h(o);while(p.length)p.shift()();return r.push.apply(r,u||[]),e()}function e(){for(var t,o=0;o<r.length;o++){for(var e=r[o],n=!0,s=1;s<e.length;s++){var a=e[s];0!==i[a]&&(n=!1)}n&&(r.splice(o--,1),t=c(c.s=e[0]))}return t}var n={},i={app:0},r=[];function c(o){if(n[o])return n[o].exports;var e=n[o]={i:o,l:!1,exports:{}};return t[o].call(e.exports,e,e.exports,c),e.l=!0,e.exports}c.m=t,c.c=n,c.d=function(t,o,e){c.o(t,o)||Object.defineProperty(t,o,{enumerable:!0,get:e})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,o){if(1&o&&(t=c(t)),8&o)return t;if(4&o&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(c.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&o&&"string"!=typeof t)for(var n in t)c.d(e,n,function(o){return t[o]}.bind(null,n));return e},c.n=function(t){var o=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(o,"a",o),o},c.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},c.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],a=s.push.bind(s);s.push=o,s=s.slice();for(var u=0;u<s.length;u++)o(s[u]);var h=a;r.push([0,"chunk-vendors"]),e()})({0:function(t,o,e){t.exports=e("cd49")},2395:function(t,o,e){},"7c55":function(t,o,e){"use strict";e("2395")},cd49:function(t,o,e){"use strict";e.r(o);var n=e("2b0e"),i=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{attrs:{id:"app"}},[e("svg",{attrs:{width:"480",height:"500"},on:{touchmove:t.tm,touchstart:t.ts,touchend:t.te,pointerdown:t.tsp,pointerup:t.tep,pointermove:t.tmp,wheel:function(o){return o.stopPropagation(),o.preventDefault(),t.wheel.apply(null,arguments)}}},[e("g",{attrs:{transform:"translate("+t.draw_origin.x+", "+t.draw_origin.y+") scale("+t.current_zoom+")"}},[e("rect",{attrs:{x:"-2000",y:"-2000",width:"4480",height:"4600",fill:"pink"}}),e("g",{staticClass:"grid"},[t._l([0,50,100,150,200,250,300,350,400,450,500,550,600,650,700,750,800,850,900,950,1e3],(function(t){return e("line",{attrs:{x1:"0",x2:"500",y1:t,y2:t,"stroke-width":"1",stroke:"grey"}})})),t._l([0,50,100,150,200,250,300,350,400,450,500],(function(t){return e("line",{attrs:{y1:"0",y2:"1000",x1:t,x2:t,"stroke-width":"1",stroke:"grey"}})}))],2)]),e("g",{staticClass:"finger-mark circles"},t._l(t.touches,(function(t){return e("g",{key:t.id,staticClass:"circle"},[e("circle",{attrs:{cx:t.clientX,cy:t.clientY,r:"5",fill:"lightblue","stroke-width":"3",stroke:"blue"}}),e("circle",{attrs:{cx:t.clientX,cy:t.clientY,r:"100",fill:"transparent","stroke-width":"1",stroke:"red"}})])})),0),t.touches.length>1?e("g",{staticClass:"finger-mark lines"},[e("line",{attrs:{x1:t.touches[0].clientX,y1:t.touches[0].clientY,x2:t.touches[1].clientX,y2:t.touches[1].clientY,"stroke-width":"3",stroke:"white",fill:"none"}}),e("line",{attrs:{x1:t.touches[0].clientX,y1:t.touches[0].clientY,x2:t.touches[1].clientX,y2:t.touches[1].clientY,"stroke-width":"1",stroke:"grey",fill:"none"}}),e("circle",{attrs:{cx:(t.touches[0].clientX+t.touches[1].clientX)/2,cy:(t.touches[0].clientY+t.touches[1].clientY)/2,r:"10",stroke:"green","stroke-width":"1",fill:"lightgreen"}})]):t._e(),t.touchable?e("g",{staticClass:"finger-mark pinch-start-point",attrs:{transform:"translate("+t.pinch_start_point.x+", "+t.pinch_start_point.y+")"}},[e("line",{attrs:{x1:"-10",y1:"-10",x2:"10",y2:"10",stroke:"blue","stroke-width":"2"}}),e("line",{attrs:{x1:"10",y1:"-10",x2:"-10",y2:"10",stroke:"blue","stroke-width":"2"}})]):t._e(),e("object-layer",{attrs:{draw_origin:t.draw_origin,zoom:t.current_zoom}})],1),e("div",{staticClass:"actions"},[e("a",{staticClass:"button",attrs:{href:"#"},on:{click:function(o){return o.preventDefault(),t.reload.apply(null,arguments)}}},[t._v("再読込")]),e("a",{staticClass:"button",attrs:{href:"#"},on:{click:function(o){return o.preventDefault(),t.save_camera.apply(null,arguments)}}},[t._v("カメラ保存")]),t.touchable?e("span",[t._v("タッチ可能")]):e("span",[t._v("タッチ不可能")]),e("br"),e("div",{staticClass:"camera-actions"},t._l(t.camera_history,(function(o,n){return e("a",{staticClass:"button",attrs:{href:"#"},on:{click:function(o){return o.preventDefault(),t.load_camera(n)}}},[t._v("カメラ"+t._s(o.id))])})),0),e("div",{staticClass:"pan-actions"},[e("a",{staticClass:"button",attrs:{href:"#"},on:{click:function(o){return o.preventDefault(),t.pan(-1,0)}}},[t._v("⬅")]),e("a",{staticClass:"button",attrs:{href:"#"},on:{click:function(o){return o.preventDefault(),t.pan(0,1)}}},[t._v("⬇")]),e("a",{staticClass:"button",attrs:{href:"#"},on:{click:function(o){return o.preventDefault(),t.pan(0,-1)}}},[t._v("⬆")]),e("a",{staticClass:"button",attrs:{href:"#"},on:{click:function(o){return o.preventDefault(),t.pan(1,0)}}},[t._v("➡")])])]),e("div",{staticClass:"info"},[e("span",[t._v("zoom_level "+t._s(t.zoom_level))]),e("span",[t._v("/")]),e("span",[t._v("zoom "+t._s(t.current_zoom))]),e("br"),e("table",[t._m(0),t._m(1),e("tbody",t._l(t.touches,(function(o){return e("tr",[e("td",[t._v(t._s(o.id))]),e("td",[t._v(t._s(o.clientX))]),e("td",[t._v(t._s(o.clientY))])])})),0)])])])},r=[function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("colgroup",[e("col",{staticStyle:{width:"100px"}}),e("col",{staticStyle:{width:"100px"}}),e("col",{staticStyle:{width:"100px"}})])},function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("thead",[e("tr",[e("th",[t._v("ID")]),e("th",[t._v("X")]),e("th",[t._v("Y")])])])}],c=e("9ab4"),s=e("1b40"),a=e("2ef0"),u=e.n(a),h=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("g",{staticClass:"object_layer",attrs:{transform:"translate("+t.draw_origin.x+", "+t.draw_origin.y+") scale("+t.zoom+")"}},[e("circle",{attrs:{cx:t.cx,cy:t.cy,r:t.is_dragging?40:30,fill:t.is_dragging?" lightblue":"white",stroke:t.is_dragging?" blue":"lightblue","stroke-width":"2"},on:{touchstart:t.start_drag_proxy,pointerdown:t.start_drag_proxy,touchend:t.stop_drag,pointerup:t.stop_drag,pointerleave:t.stop_drag,touchmove:function(o){return o.stopPropagation(),o.preventDefault(),t.drag_proxy.apply(null,arguments)},pointermove:function(o){return o.stopPropagation(),o.preventDefault(),t.drag_proxy.apply(null,arguments)}}})])},l=[],p=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.cx=200,o.cy=200,o.is_dragging=!1,o.touch_start_point={x:0,y:0},o}return Object(c["b"])(o,t),Object.defineProperty(o.prototype,"touchable",{get:function(){return navigator.maxTouchPoints>1},enumerable:!1,configurable:!0}),o.prototype.start_drag_proxy=function(t){this.touchable?this.start_drag(t):this.start_drag_p(t)},o.prototype.start_drag=function(t){this.is_dragging=!0,this.touch_start_point.x=t.touches[0].clientX,this.touch_start_point.y=t.touches[0].clientY},o.prototype.start_drag_p=function(t){this.is_dragging=!0},o.prototype.drag_proxy=function(t){this.is_dragging&&(this.touchable?this.drag(t):this.drag_p(t))},o.prototype.stop_drag=function(){this.is_dragging=!1},o.prototype.drag=function(t){this.cx+=(t.touches[0].clientX-this.touch_start_point.x)/this.zoom,this.cy+=(t.touches[0].clientY-this.touch_start_point.y)/this.zoom,this.touch_start_point.x=t.touches[0].clientX,this.touch_start_point.y=t.touches[0].clientY},o.prototype.drag_p=function(t){void 0!=t.movementX&&(this.cx+=t.movementX/this.zoom,this.cy+=t.movementY/this.zoom)},Object(c["a"])([Object(s["b"])({default:{x:0,y:0}})],o.prototype,"draw_origin",void 0),Object(c["a"])([Object(s["b"])({default:{x:0,y:0}})],o.prototype,"zoom",void 0),o=Object(c["a"])([Object(s["a"])({components:{}})],o),o}(s["c"]),_=p,d=_,g=e("2877"),f=Object(g["a"])(d,h,l,!1,null,null,null),y=f.exports,m=function(){return window.getSelection?window.getSelection().empty?function(){window.getSelection().empty()}:window.getSelection().removeAllRanges?function(){window.getSelection().removeAllRanges()}:void 0:document.selection?function(){document.selection.empty()}:function(){}}(),v=50,x=.05,b=Math.pow(1+x,2),w=Math.pow(1+x,-2),z=u.a.map(u.a.range(-1*v,150),(function(t){return Math.pow(1+x,t)}));z[v]=1;var k=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.touches=[],o.draw_origin={x:0,y:0},o.current_zoom=z[v],o.zoom_standard=-1,o.map_dragging=!1,o.pinch_start_point={x:240,y:300},o.last_touch_point={x:0,y:0},o.zoom_level=v,o.camera_history=[],o.index_=0,o.touch_count=0,o.pinching=!1,o.last_zoom_direction="",o}return Object(c["b"])(o,t),o.prototype.tm=function(t){this.touchable&&this.touchmove(t)},o.prototype.ts=function(t){this.touchable&&this.touchstart(t)},o.prototype.te=function(t){this.touchable&&this.touchend(t)},o.prototype.tsp=function(t){this.touchable||this.touchstartP(t)},o.prototype.tep=function(t){this.touchable||this.touchendP(t)},o.prototype.tmp=function(t){this.touchable||this.touchmoveP(t)},o.prototype.noop=function(){console.log("noop")},Object.defineProperty(o.prototype,"touchable",{get:function(){return navigator.maxTouchPoints>1},enumerable:!1,configurable:!0}),o.prototype.pan=function(t,o){this.draw_origin.x+=t,this.draw_origin.y+=o},o.prototype.reload=function(){location.reload()},o.prototype.wheel=function(t){var o=!0;t.deltaY>0&&(o=!1),this.change_zoom(o,t.clientX,t.clientY)},o.prototype.change_zoom=function(t,o,e){var n=this,i=function(){return n.current_zoom}(),r=this.zoom_level;r=t?Math.min(z.length-1,r+1):Math.max(0,r-1),this.current_zoom=z[r],this.zoom_level=r;var c={x:o,y:e},s=this.draw_origin,a=this.current_zoom,u=a/i*-1;this.draw_origin={x:Math.round((c.x-s.x)*u+c.x),y:Math.round((c.y-s.y)*u+c.y)}},o.prototype.load_camera=function(t){this.draw_origin.x=this.camera_history[t].x,this.draw_origin.y=this.camera_history[t].y,this.current_zoom=this.camera_history[t].zoom},o.prototype.save_camera=function(){this.index_+=1,this.camera_history.push({x:this.draw_origin.x,y:this.draw_origin.y,zoom:this.current_zoom,id:this.index_})},o.prototype.touchstart=function(t){this.map_dragging=!0,this.last_touch_point={x:t.touches[0].clientX,y:t.touches[0].clientY}},o.prototype.touchstartP=function(t){this.map_dragging=!0,this.last_touch_point={x:t.clientX,y:t.clientY}},o.prototype.touchend=function(t){this.map_dragging=!1,this.pinching=!1,this.touches=[]},o.prototype.touchendP=function(t){this.map_dragging=!1},o.prototype.touchmoveP=function(t){this.map_dragging&&(this.draw_origin.x+=t.movementX,this.draw_origin.y+=t.movementY)},o.prototype.touchmove=function(t){if(1===t.touches.length)this.map_dragging&&(1===this.touch_count&&(this.draw_origin.x+=t.touches[0].clientX-this.last_touch_point.x,this.draw_origin.y+=t.touches[0].clientY-this.last_touch_point.y),this.last_touch_point={x:t.touches[0].clientX,y:t.touches[0].clientY}),this.touch_count=1,this.pinching=!1,this.pinch_start_point={x:this.last_touch_point.x,y:this.last_touch_point.y};else{var o={x:(t.touches[0].clientX+t.touches[1].clientX)/2,y:(t.touches[0].clientY+t.touches[1].clientY)/2};this.last_touch_point=o;var e=Math.pow(t.touches[0].clientX-t.touches[1].clientX,2)+Math.pow(t.touches[0].clientY-t.touches[1].clientY,2);this.pinching||(this.pinch_start_point.x=o.x,this.pinch_start_point.y=o.y,this.pinching=!0),e>this.zoom_standard*b?(this.change_zoom(!0,this.pinch_start_point.x,this.pinch_start_point.y),this.zoom_standard=e,this.last_zoom_direction="up"):e<this.zoom_standard*w&&(this.change_zoom(!1,this.pinch_start_point.x,this.pinch_start_point.y),this.zoom_standard=e,this.last_zoom_direction="down"),this.touch_count=t.touches.length}this.touches=u.a.map(t.touches,(function(t){return{id:t.identifier,clientX:Math.floor(t.clientX),clientY:Math.floor(t.clientY)}})),m()},o=Object(c["a"])([Object(s["a"])({components:{"object-layer":y}})],o),o}(s["c"]),X=k,Y=X,j=(e("7c55"),Object(g["a"])(Y,i,r,!1,null,null,null)),O=j.exports;n["a"].config.productionTip=!1,document.body.addEventListener("touchmove",(function(t){t.preventDefault()}),{passive:!1}),new n["a"]({render:function(t){return t(O)}}).$mount("#app")}});
//# sourceMappingURL=app.a8b60bfc.js.map